# Regular Expression

> 파이썬 정규 표현식

✅ 복잡한 문자열을 처리할 때 사용하는 도구

✅ 특정 프로그래밍 언어에 종속된 문법이 아님. 문자열을 처리하는 곳이라면 폭넓게 사용 가능한 도구



## 파이썬의 re 모듈

```python
import re
```

#### 정규식 객체

- `compile(string)`: 문자열 패턴을 컴파일하여 <u>정규식 객체</u>를 반환

#### 정규식 검사 함수

- `match(pattern, string)`: 시작 부분부터 패턴이 존재하는지 검사하여 **MatchObject**를 반환
- `search(pattern, string)`: 전체에서 패턴이 존재하는지 검사하여 **MatchObject**를 반환
- `findall(pattern, string)`: 전체에서 패턴과 매치되는 모든 경우를 찾아 **리스트**로 반환
- `finditer(pattern, string)`: 전체에서 패턴과 일치하는 결과에 대한 **iterator** 객체를 반환

#### 문자열 수정 함수

- `sub(pattern, repl, string)`: 문자열에서 패턴과 매칭되는 부분을 `repl`로 수정한 문자열을 반환
- `subn(pattern, repl, string)`: `sub()`의 결과를 `(결과 문자열, 교체 횟수)` 형태로 반환



## 메타 문자

특정한 문자 혹은 계열을 표현하는 약속된 **기호**. 특정한 규칙을 가진 여러 단어를 짧게 압축할 수 있어 편리함.

- `^` : 문자열의 시작
- `$` : 문자열의 끝
- `|` : or 조건식
- `[]` : 문자 클래스
  - `^`을 사용하여 해당 문자들을 제외한 문자들을 나타낼 수 있음
  - `-`을 사용하여 범위 안의 문자들을 나타낼 수 있음
- `\d` : 숫자
- `\D` : 숫자가 아닌 모든 문자

- `\w` : 알파벳 대소문자, 숫자, 밑줄(_)
- `\W` : `\w`에 해당되지 않는 문자
- `\s` : 공백, 탭, 문자
- `\S` : `\s`에 해당되지 않는 문자
- `\n` : 개행 문자
- `\` : 이스케이프용 문자. 특별한 의미를 나타내는 기호를 문자 그대로 사용
- `.` : 모든 문자와 대응
  - c[.]t과 같이 `.`을 그대로 표현할 수 있음
- `(?i)` : 대소문자를 구분하지 않는 패턴 표현 가능



## 수량자

동일한 글자나 패턴이 반복될 때, 그대로 정규표현식을 만들고자 하면 불편함. **수량자**를 이용하여 간단히 표현.

`\d`와 `\w`를 이용하면 각각 숫자와 문자를 <u>한 글자</u>씩 매칭. 이어지는 문자를 패턴으로 만들어 단어 단위로 매칭하고 싶을 때 수량자를 사용.

- `*` : 0개 이상
- `+` : 1개 이상
- `?` : 0개 또는 1개. 다른 수량자 뒤에 붙어 수량자의 탐욕성을 제어할 수 있음
  - 수량자는 가능한 가장 긴 문자열과 매칭하려는 특성을 가짐. `?`을 뒤에 붙여 반대의 성질을 갖게 함.
- `{n}` : n개. `\d{3}`
- `{n,m}` : n개 이상, m개 이하. 공백 없음. `\w{3, 5}`
- `{n,}` : n개 이상. `a{4,}`



## 그룹

괄호`()`는 그룹을 나타내며, 전체 패턴 내에서 하나로 묶여지는 패턴을 말한다. 그룹과 `|`를 결합한 형태, 또는 그룹 뒤에 수량자를 붙이는 패턴으로 자주 사용된다.

#### 예시

- `(s|y)ungil`은 `sungil`, `yungil`과 매칭
- `(tom|pot)ato`는 `tomato`, `potato`와 매칭
- `(base|kick){2}`은 `basebase`, `basekick`, `kickbase`, `kickkick`과 매칭

#### 재사용

한 번 만든 그룹은 재사용할 수 있다. 만들어진 순서부터 1번부터 시작하는 그룹으로 참조할 수 있으며, 매치한 그룹을 패턴 내에서 재사용하려면 `\\1`과 같이 그룹 번호를 이스케이프하여 나타내야 한다.

- `(to)ma\\1`은 `tomato`과 매칭
- `re.sub(p1, "\g<1>-****-\g<2>", text)`에서 처럼 `\g<1>`, `\g<2>`와 같은 표현을 통해 sub 함수의 대체할 문자열에서 정규식의 그룹을 참조할 수 있음

#### 비캡쳐링 그룹

파이썬 정규표현식에서 그룹으로 캡쳐한 부분이 있다면 이외의 부분들은 출력하지 않는다. **비캡쳐링 그룹**은 패턴 문자들을 묶되, 그룹 단위로 매칭되지는 않게끔 해준다.

- `(?:)`
- `(?:tom|pot)ato`를 이용하면 `findall()` 했을 때 `tomato`, `potato`를 온전히 반환

#### 그 외

`re`모듈의 `match` 객체에 속해있는 group 메서드를 이용해 매칭된 결과 중 일부 내용만을 추출할 수 있는 등 다양한 사용법이 있다.